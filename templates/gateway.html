{% load static %}
<!Doctype HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Window</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
    body {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
    }

    .container {
        max-width: 1400px;  /* Increased from 1200px */
        margin: auto;
        padding: 2rem;
    }

    .col-lg-6 {
        flex: 0 0 75%;  /* Changed from 50% */
        max-width: 75%;  /* Changed from 50% */
    }

    .card {
        min-width: 800px;  /* Added minimum width */
        margin: 0 auto;
        border: none;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .tab-content {
        padding: 2rem;  /* Added more padding */
    }

    @media (max-width: 992px) {
        .col-lg-6 {
            flex: 0 0 100%;
            max-width: 100%;
        }

        .card {
            min-width: auto;
            width: 100%;
        }
    }

    .card-header {
        background: white;
        padding: 0;
        border: none;
    }

    .display-6 {
        color: #2c3e50;
        font-weight: 600;
        margin-bottom: 2rem;
    }

    .nav-pills {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 10px;
        gap: 10px;
    }

    .nav-pills .nav-link {
        border-radius: 8px;
        padding: 15px 20px;
        font-weight: 500;
        transition: all 0.3s ease;
    }

    .nav-pills .nav-link.active {
        background: #3498db;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
    }

    .nav-pills .nav-link i {
        font-size: 1.2rem;
        margin-right: 8px;
    }

    .card.bg-primary {
        background: linear-gradient(135deg, #3498db, #2980b9) !important;
        padding: 15px;
        border-radius: 10px;
        margin: 1rem 0;
    }

    .card.bg-primary h5 {
        color: white;
        margin: 0;
        text-align: center;
        font-size: 1.1rem;
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-group h6 {
        color: #2c3e50;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .form-control {
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        padding: 12px;
        transition: all 0.3s ease;
    }

    .form-control:focus {
        border-color: #3498db;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    .input-group-text {
        border: none;
        background: #f8f9fa;
        padding: 12px 15px;
    }

    .input-group-append i {
        font-size: 1.5rem;
        color: #7f8c8d;
    }

    select.form-control {
        height: 60px;
        cursor: pointer;
    }

    .btn-primary {
        background: #3498db;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        transition: all 0.3s ease;
    }

    .btn-primary:hover {
        background: #2980b9;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
    }

    .btn-block {
        padding: 15px;
    }

    .text-muted {
        font-size: 0.9rem;
        line-height: 1.6;
    }

    .alert {
        border-radius: 10px;
        padding: 15px 20px;
        margin-bottom: 1.5rem;
    }

    /* Payment Method Specific Styles */
    #credit-card, #paypal, #net-banking {
        padding: 2rem;
    }

    .tab-pane {
        animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
        .container {
            padding: 15px;
        }

        .nav-pills {
            flex-direction: column;
        }

        .nav-pills .nav-link {
            text-align: center;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .btn-block {
            padding: 12px;
        }
    }

    /* Card Icons Animation */
    .input-group-append i {
        transition: all 0.3s ease;
    }

    .input-group-append i:hover {
        transform: scale(1.1);
        color: #3498db;
    }

    /* Input Focus Effects */
    .form-control:focus + .input-group-append i {
        color: #3498db;
    }

    /* Success State */
    .was-validated .form-control:valid {
        border-color: #2ecc71;
    }

    /* Error State */
    .was-validated .form-control:invalid {
        border-color: #e74c3c;
    }

    /* Enhanced Dropdown Styles */
    select.form-control {
        height: 50px !important;  /* Increased from default */
        padding: 0 15px;
        font-size: 1rem;
        cursor: pointer;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 15px center;
        background-size: 15px;
    }

    select.form-control:hover {
        border-color: #3498db;
    }

    select.form-control:focus {
        border-color: #3498db;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    .input-group select.form-control {
        margin: 0 5px;  /* Add spacing between month/year dropdowns */
    }

    select.form-control option {
        padding: 10px;  /* Increase padding for dropdown options */
        font-size: 1rem;
    }

    /* Bank selection dropdown specific styles */
    #ccmonth.form-control {
        height: 65px !important;  /* Even larger for bank selection */
    }
</style>
</head>
<body>
    <div class="container py-6">
        <!-- For demo purpose -->
        <div class="row mb-4">
            <div class="col-lg-8 mx-auto text-center">
                <h3 class="display-6">Integrated Payment Gateway</h3>
                {% for message in messages %}

                <div class="alert alert-{{message.tags}} alert-dismissible fade show" id="msg" role="alert">
                    <strong>{{message}}</strong>
                    {% comment %} <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button> {% endcomment %}
                </div>
                {% endfor %}
            </div>
        </div> <!-- End -->
        <div class="row">
            <div class="col-lg-6 mx-auto">
                <div class="card ">
                    <div class="card-header">
                        <div class="bg-white shadow-sm pt-4 pl-2 pr-2 pb-2">
                            <!-- Credit card form tabs -->
                            <ul role="tablist" class="nav bg-light nav-pills rounded nav-fill mb-3">
                                <li class="nav-item"> <a data-toggle="pill" href="#credit-card" class="nav-link active "> <i class="fas fa-credit-card mr-2"></i> Credit Card </a> </li>
                                <li class="nav-item"> <a data-toggle="pill" href="#paypal" class="nav-link "> <i class="fa-brands fa-google-pay mr-1"></i> Google Pay </a> </li>
                                <li class="nav-item"> <a data-toggle="pill" href="#net-banking" class="nav-link "> <i class="fas fa-mobile-alt mr-2"></i> Net Banking </a> </li>
                            </ul>
                        </div>
                        <br> <!-- End -->
                         <div class="card bg-primary mt-2 mb-2">
                            <h5>Transaction for Rs.{{dict1.TXN_AMOUNT}} of Order id {{dict1.ORDER_ID}}</h5>
                            </div> 
                        <!-- Credit card form content -->
                        <div class="tab-content">
                            <!-- credit card info-->
                            <div id="credit-card" class="tab-pane fade show active pt-3">
                                <form role="form" action="/payment-stage/" method="post">
                                    {% csrf_token %}
                                    <input type="hidden" name="id" value={{dict1.ORDER_ID}}>
                                    <input type="hidden" name="amt" value={{dict1.TXN_AMOUNT}}>
                                    {% comment %} <input type="hidden" name="my_list[]" value="item3"> {% endcomment %}
                                     {% comment %} <div class="card bg-primary mt-2 mb-2">
                                    <h5>Transaction for Rs.{{dict.TXN_AMOUNT}} of Order id {{dict.ORDER_ID}}</h5>
                                    </div>  {% endcomment %}
                                
                                    <h2>
                                    <div class="form-group"> <label for="username">
                                            <h6>Card Owner</h6> 
                                        </label> <input type="text" name="username" placeholder="Card Owner Name (BLOCK LETTERS)" required class="form-control "> </div>
                                    <div class="form-group"> <label for="cardNumber">
                                            <h6>Card number</h6>
                                        </label>
                                        <div class="input-group"> <input  type="text" inputmode="numeric" id="cardNumber" name="cardNumber" placeholder="Valid card number" maxlength="19" class="form-control " required>
                                            <div class="input-group-append"> <span class="input-group-text text-muted"> <i class="fab fa-cc-visa mx-1"></i> <i class="fab fa-cc-mastercard mx-1"></i> <i class="fab fa-cc-amex mx-1"></i> </span> </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-8">
                                            <div class="form-group"> <label><span class="hidden-xs">
                                                        <h6>Expiration Date</h6>
                                                    </span></label>
                                                <div class="input-group"> <select placeholder="MM" name="" class="form-control" required> 
                                                    <option value="" selected disabled>--Month--</option>
                                                            <option>01</option>
                                                            <option>02</option>
                                                            <option>03</option>
                                                            <option>04</option>
                                                            <option>05</option>
                                                            <option>06</option>
                                                            <option>07</option>
                                                            <option>08</option>
                                                            <option>09</option>
                                                            <option>10</option>
                                                            <option>11</option>
                                                            <option>12</option></select>
                                                    <select placeholder="YY" name="" class="form-control" required>
                                                        <option value="" selected disabled>--Year--</option>
                                                        <option>2022</option>
                                                        <option>2023</option>
                                                        <option>2024</option>
                                                        <option>2025</option>
                                                        <option>2026</option>
                                                        <option>2027</option> 
                                                        <option>2028</option>
                                                        <option>2029</option>
                                                        <option>2030</option>
                                                        <option>2031</option>
                                                        <option>2032</option>
                                                        <option>2033</option>
                                                        <option>2034</option>
                                                        <option>2035</option>
                                                        <option>2036</option></select></div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group mb-4"> <label data-toggle="tooltip" title="Three digit CV code on the back of your card">
                                                    <h6>CVV <i class="fa fa-question-circle d-inline"></i></h6>
                                                </label> <input type="password" id="cvv" required class="form-control"> </div>
                                        </div>
                                    </div>
                                    <div class="card-footer">
                                        {% comment %} <a href="/payment-stage"> {% endcomment %}
                                            <button type="submit" class="subscribe btn btn-primary btn-block shadow-sm" onclick="validate()"> Confirm Payment </button>
                                        {% comment %} </a> {% endcomment %}
                                </form>
                            </div>
                        </div> <!-- End -->
                        <!-- Paypal info -->
                        <div id="paypal" class="tab-pane fade pt-3">
                            <form role="form" action="/payment-stage/" method="post">
                                {% csrf_token %}
                                <input type="hidden" name="id" value={{dict1.ORDER_ID}}>
                                <input type="hidden" name="amt" value={{dict1.TXN_AMOUNT}}>
                            <div class="form-group"> <label for="username">
                                <h6>Enter UPI ID</h6>
                            </label> <input type="text" name="googlepay" placeholder="example@okbank" required class="form-control "> </div>
                            <p> <button type="submit" class="btn btn-primary "><i class="fa-brands fa-google-pay mr-2"></i>Pay using UPI ID </button> </p>
                            <p class="text-muted"> Note: After clicking on the button, you will be directed to a secure gateway for payment. After completing the payment process, you will be redirected back to the website to view details of your order. </p>
                        </div> 
                    </form>
                    <!-- End -->
                        <!-- bank transfer info -->
                        <div id="net-banking" class="tab-pane fade pt-3">
                            <form role="form" action="/payment-stage/" method="post">
                                {% csrf_token %}
                                <input type="hidden" name="id" value={{dict1.ORDER_ID}}>
                                <input type="hidden" name="amt" value={{dict1.TXN_AMOUNT}}>
                            <div class="form-group "> <label for="Select Your Bank">
                                    <h6>Select your Bank</h6>
                                </label> <select class="form-control" id="ccmonth">
                                    <option value="" selected disabled>--Please select your Bank--</option>
                                    <option>HDFC Bank</option>
                                    <option>SBI Bank</option>
                                    <option>AXIS Bank</option>
                                    <option>BOI Bank</option>
                                    <option>PNB Bank</option>
                                    <option>KOTAK MAHINDRA Bank</option>
                                    <option>ICICI Bank</option>
                                    <option>UNION Bank</option>
                                    <option>BARODA Bank</option>
                                    <option>IDBI Bank</option>
                                </select> </div>
                            <div class="form-group">
                                <p> <button type="submit" class="btn btn-primary "><i class="fas fa-mobile-alt mr-2"></i> Proceed Payment</button> </p>
                            </div>
                            <p class="text-muted">Note: After clicking on the button, you will be directed to a secure gateway for payment. After completing the payment process, you will be redirected back to the website to view details of your order. </p>
                        </div>
                    </form> <!-- End -->
                        <!-- End -->
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js"></script>
    <script>    
    //     $(function() {
    //   $('[data-toggle= "\"]').tooltip()
    // })
    {% comment %} let cNumber = document.getElementById('cardNumber');
    cNumber.addEventListener('input', function (e) {
    let num = cNumber.value;
    let newValue = '';
    num = num.replace(/\s/g, '');
    for (var i = 0; i < num.length; i++) {
        if (i % 4 == 0 && i > 0) newValue = newValue.concat(' ');
        newValue = newValue.concat(num[i]);
        cNumber.value = newValue;
    }
}) {% endcomment %}

setTimeout(() => {
    let get = document.getElementById('msg');
    get.style.display = 'none';
    }, 3000);

    const numericField = document.getElementById("cardNumber");

        // Add an input event listener to the text field
        numericField.addEventListener("input", function () {
            // Remove any non-numeric characters using a regular expression
            this.value = this.value.replace(/[^0-9]/g, "");
        });


        const cvvField = document.getElementById("cvv");

        // Add an input event listener to the text field
        cvvField.addEventListener("input", function () {
            // Remove any non-numeric characters using a regular expression
            this.value = this.value.replace(/[^0-9]/g, "");
        });
{% comment %} 
    function validate(){
        let cnumber = document.getElementById('cardNumber').value;
        console.log(cnumber)
        let cnumber1 = cnumber.length;
        if (cnumber1 < 16){
            alert("Credit Card Number Should be of 16 Digits");
        }   
    }      {% endcomment %}
</script>
</body>
</html>


